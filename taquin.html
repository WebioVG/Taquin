<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">

    <title>Taquin</title>
</head>

<body>

    <div class="container">
        <div class="main">
            <header class="header">
                <div class="turns">Counter: 0</div>
                <h1 class="title">Taquin</h1>
                <div class="timer">0s</div>
            </header>

            <div class="taquin_display">
                <div id="imageFull"></div>

                <div id="square1" class="square" data-key="1"></div>
                <div id="square2" class="square" data-key="2"></div>
                <div id="square3" class="square" data-key="3"></div>
                <div id="square4" class="square" data-key="4"></div>
                <div id="square5" class="square" data-key="5"></div>
                <div id="square6" class="square" data-key="6"></div>
                <div id="square7" class="square" data-key="7"></div>
                <div id="square8" class="square" data-key="8"></div>
                <div id="square9" class="square" data-key="9"></div>
                <div id="square10" class="square" data-key="10"></div>
                <div id="square11" class="square" data-key="11"></div>
                <div id="square12" class="square" data-key="12"></div>
                <div id="square13" class="square" data-key="13"></div>
                <div id="square14" class="square" data-key="14"></div>
                <div id="square15" class="square" data-key="15"></div>
                <div id="square16" class="square" data-key="16"></div>
            </div>

            <div class="menu">
                <div>
                    <div class="stop-button">Stop</div>
                </div>
                <div>
                    <div class="play-button">Play</div>
                </div>
                <div>
                    <div class="retry-button">Retry</div>
                </div>
            </div>
        </div>

        <div class="help">
            <div class="wheel_Container">
                <svg class="wheel" xmlns:dc="http://purl.org/dc/elements/1.1/"
                    xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                    xmlns:cc="http://web.resource.org/cc/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                    xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"
                    xmlns:ns1="http://sozi.baierouge.fr" id="svg2" sodipodi:modified="true" viewBox="0 0 387.06 386"
                    sodipodi:docbase="/home/barret/Desktop/My Documents/Art/icons" inkscape:export-ydpi="90"
                    inkscape:export-xdpi="90" version="1.0" inkscape:output_extension="org.inkscape.output.svg.inkscape"
                    sodipodi:docname="gear.svg"
                    inkscape:export-filename="/home/barret/Desktop/My Documents/Art/icons/gear.png"
                    inkscape:version="0.45" sodipodi:version="0.32">

                    <defs id="defs4">
                        <linearGradient id="linearGradient4568">
                            <stop id="stop4570" style="stop-color:#9394b8" offset="0" />
                            <stop id="stop4807" style="stop-color:#ffffff" offset="1" />
                        </linearGradient>
                        <linearGradient id="linearGradient3806" y2="263.97" xlink:href="#linearGradient4568"
                            gradientUnits="userSpaceOnUse" x2="182.3"
                            gradientTransform="matrix(1.3339 0 0 1.3339 125.21 189.44)" y1="129.77" x1="182.3"
                            inkscape:collect="always" />
                        <linearGradient id="linearGradient3809" y2="277.43" xlink:href="#linearGradient4568"
                            gradientUnits="userSpaceOnUse" x2="365.01" gradientTransform="matrix(-1 0 0 1 735.81 -20)"
                            y1="664.38" x1="365.01" inkscape:collect="always" />
                        <linearGradient id="linearGradient3813" y2="-236.13" xlink:href="#linearGradient4568"
                            gradientUnits="userSpaceOnUse" x2="-987.59"
                            gradientTransform="matrix(.64459 0 0 -.62978 1002.1 304.33)" y1="74.616" x1="-987.59"
                            inkscape:collect="always" />
                    </defs>
                    <g id="layer1" inkscape:label="Layer 1" inkscape:groupmode="layer"
                        transform="translate(-174.38 -259.39)">
                        <g id="g2290">
                            <path id="path4850" style="color:#000000;fill:url(#linearGradient3813)"
                                d="m237.19 307.47l16.44 45.18c-0.04 0.04-0.06 0.09-0.1 0.13l0.13 0.37c-6.92 7.54-13.13 15.85-18.5 24.91l-49.5-1.34c-0.98 2.22-1.99 4.44-2.88 6.68-1.21 3.06-2.33 6.11-3.37 9.19-1.05 3.08-2.03 6.21-2.91 9.31-0.78 2.79-1.47 5.55-2.12 8.35l40.5 27.09c-0.05 0.44-0.02 0.9-0.07 1.34l0.28 0.19c-0.46 4.73-0.62 9.45-0.62 14.16h88.94c0.01-2.84 0.25-5.68 0.65-8.47 0.41-2.79 1-5.55 1.78-8.25 0.78-2.71 1.74-5.36 2.88-7.94s2.48-5.08 3.97-7.5 3.14-4.75 4.97-6.97c1.83-2.21 3.84-4.3 6-6.28 2.15-1.97 4.44-3.83 6.9-5.53 2.47-1.69 5.11-3.25 7.88-4.62 1.97-0.99 3.95-1.83 5.97-2.6 2.02-0.76 4.07-1.44 6.12-2 2.06-0.55 4.12-0.99 6.19-1.34 0.97-0.16 1.96-0.23 2.94-0.35 0.33-0.04 0.66-0.08 1-0.12 0.77-0.08 1.54-0.23 2.31-0.28 0.75-0.05 1.5-0.01 2.25-0.03 0.85-0.04 1.71-0.06 2.56-0.07 0.47 0.01 0.94-0.04 1.41-0.03 0.34 0.01 0.69 0.05 1.03 0.07 1.72 0.05 3.44 0.21 5.16 0.4 7.37 0.84 14.74 2.86 21.75 6.35 22.11 11.01 34.82 32.86 34.96 55.56h89.04c-0.01-4.73-0.22-9.48-0.69-14.22l41-27.44c-0.01-0.05-0.05-0.1-0.06-0.15-0.72-3.13-1.5-6.24-2.38-9.35-0.88-3.1-1.83-6.2-2.87-9.28-1.05-3.08-2.17-6.13-3.38-9.19-0.88-2.21-1.84-4.43-2.81-6.62l-49.13 1.34c-0.33-0.55-0.72-1.07-1.06-1.62h-0.31c-2.41-3.96-4.97-7.78-7.69-11.44s-5.59-7.17-8.59-10.53l16.68-45.81c-1.45-1.27-2.89-2.54-4.37-3.75-2.47-2.03-4.98-4.01-7.53-5.91-2.56-1.9-5.18-3.73-7.81-5.5-2.64-1.77-5.32-3.49-8.04-5.13-0.77-0.46-1.55-0.92-2.34-1.37l-39 29.34c-0.57-0.25-1.15-0.41-1.72-0.65l-0.09 0.06c-4.31-1.83-8.7-3.44-13.16-4.88-4.45-1.43-8.96-2.68-13.53-3.71l-0.06-0.16c-0.02-0.01-0.04-0.03-0.06-0.03l-14.04-46.56c-1.97-0.21-3.92-0.45-5.9-0.6-3.19-0.23-6.4-0.35-9.6-0.44-2.14-0.05-4.28-0.03-6.43-0.03-1.08 0.01-2.15-0.02-3.22 0-3.2 0.09-6.38 0.24-9.56 0.47-1.02 0.08-2.03 0.22-3.04 0.31l-14 46.38c-10.15 2.1-20.07 5.18-29.59 9.22l-39.37-29.6c-1.32 0.76-2.64 1.47-3.94 2.25-2.72 1.64-5.39 3.36-8.03 5.13s-5.26 3.6-7.82 5.5c-2.55 1.9-5.06 3.88-7.53 5.91-0.98 0.8-1.91 1.67-2.87 2.5zm181.78 39.28c1.36 0.09 2.74 0.45 4.03 1.09 5.16 2.57 7.22 8.77 4.59 13.81-2.62 5.04-8.96 7.04-14.12 4.47s-7.22-8.74-4.59-13.78c1.97-3.78 6.01-5.88 10.09-5.59zm-148.88 47.28c1.36 0.09 2.75 0.45 4.04 1.09 5.16 2.57 7.22 8.74 4.59 13.78s-8.97 7.04-14.13 4.47-7.22-8.74-4.59-13.78c1.97-3.78 6.02-5.84 10.09-5.56z" />
                            <path id="path3767" style="color:#000000;fill:url(#linearGradient3809)"
                                d="m498.63 597.32l-16.44-45.19c0.03-0.04 0.06-0.08 0.09-0.12l-0.12-0.38c6.91-7.53 13.13-15.84 18.5-24.9l49.5 1.34c0.98-2.22 1.98-4.45 2.87-6.69 1.21-3.05 2.33-6.1 3.38-9.18 1.04-3.09 2.03-6.21 2.9-9.32 0.79-2.78 1.48-5.55 2.13-8.34l-40.5-27.09c0.05-0.45 0.02-0.9 0.06-1.35l-0.28-0.19c0.47-4.72 0.62-9.44 0.62-14.15h-88.93c-0.02 2.83-0.25 5.68-0.66 8.47-0.4 2.79-1 5.54-1.78 8.25-0.78 2.7-1.73 5.35-2.88 7.93-1.14 2.58-2.47 5.09-3.96 7.5-1.5 2.42-3.14 4.76-4.97 6.97-1.83 2.22-3.85 4.31-6 6.28-2.16 1.98-4.44 3.84-6.91 5.54-2.46 1.69-5.11 3.24-7.87 4.62-1.98 0.98-3.95 1.83-5.97 2.59-2.02 0.77-4.07 1.45-6.13 2-2.05 0.56-4.11 1-6.19 1.35-0.97 0.16-1.96 0.22-2.93 0.34-0.34 0.04-0.67 0.09-1 0.13-0.77 0.08-1.55 0.22-2.32 0.28-0.75 0.05-1.49 0-2.25 0.03-0.85 0.04-1.7 0.06-2.56 0.06-0.47 0-0.94 0.04-1.4 0.03-0.35-0.01-0.69-0.05-1.04-0.06-1.71-0.06-3.43-0.21-5.15-0.41-7.38-0.83-14.75-2.85-21.75-6.34-22.12-11.01-34.83-32.86-34.97-55.56h-89.03c0 4.72 0.22 9.48 0.69 14.22l-41 27.43c0.01 0.06 0.05 0.11 0.06 0.16 0.71 3.12 1.5 6.24 2.37 9.34 0.88 3.11 1.83 6.2 2.88 9.29 1.04 3.08 2.16 6.13 3.37 9.18 0.88 2.22 1.84 4.43 2.82 6.63l49.12-1.35c0.33 0.56 0.73 1.08 1.06 1.63h0.32c2.4 3.95 4.96 7.77 7.68 11.44 2.72 3.66 5.59 7.17 8.6 10.53l-16.69 45.81c1.45 1.26 2.89 2.53 4.37 3.75 2.47 2.03 4.98 4.01 7.54 5.91 2.55 1.9 5.17 3.73 7.81 5.5s5.31 3.48 8.03 5.12c0.78 0.47 1.55 0.93 2.34 1.38l39-29.35c0.57 0.25 1.15 0.42 1.72 0.66l0.1-0.06c4.3 1.83 8.7 3.43 13.15 4.87 4.46 1.44 8.96 2.68 13.53 3.72l0.07 0.16c0.02 0 0.04 0.02 0.06 0.03l14.03 46.56c1.97 0.2 3.92 0.45 5.91 0.59 3.18 0.24 6.39 0.36 9.59 0.44 2.14 0.06 4.29 0.04 6.44 0.03 1.07-0.01 2.14 0.03 3.22 0 3.2-0.08 6.37-0.23 9.56-0.47 1.01-0.07 2.02-0.22 3.03-0.31l14-46.37c10.16-2.1 20.07-5.18 29.59-9.22l39.38 29.59c1.31-0.75 2.64-1.46 3.94-2.25 2.71-1.64 5.39-3.35 8.03-5.12s5.25-3.6 7.81-5.5 5.06-3.88 7.53-5.91c0.98-0.81 1.91-1.67 2.88-2.5zm-181.79-39.28c-1.36-0.1-2.74-0.45-4.03-1.09-5.16-2.57-7.22-8.78-4.59-13.82s8.96-7.03 14.12-4.47c5.16 2.57 7.23 8.74 4.6 13.79-1.97 3.78-6.02 5.87-10.1 5.59zm148.88-47.28c-1.36-0.1-2.74-0.45-4.03-1.1-5.16-2.57-7.22-8.74-4.6-13.78 2.63-5.04 8.97-7.03 14.13-4.47 5.16 2.57 7.22 8.74 4.59 13.79-1.97 3.78-6.01 5.84-10.09 5.56z" />
                        </g>
                        <path id="path2327" style="color:#000000;fill:#ffffff"
                            d="m368.11 358.09c-51.39 0-93.33 41.9-93.33 93.29s41.94 93.33 93.33 93.33 93.29-41.94 93.29-93.33-41.9-93.29-93.29-93.29zm0 21.3c39.86 0 71.99 32.13 71.99 71.99s-32.13 72.03-71.99 72.03-72.03-32.17-72.03-72.03 32.17-71.99 72.03-71.99z" />
                        <path id="path3500" style="color:#000000;fill:url(#linearGradient3806)"
                            d="m368.11 361.22c-49.69 0-90.16 40.48-90.16 90.16 0 49.69 40.47 90.16 90.16 90.16 49.68 0 90.12-40.47 90.12-90.16 0-49.68-40.44-90.16-90.12-90.16zm0 15.01c41.57 0 75.15 33.58 75.15 75.15s-33.58 75.16-75.15 75.16-75.16-33.59-75.16-75.16 33.59-75.15 75.16-75.15z" />
                    </g>
                </svg>
            </div>
            <div class="help_Button" id="show_Numbers">Show<br>numbers</div>
            <div class="help_Button" id="show_Image">Display<br>image</div>
            <div class="help_Button" id="change_Image">Load<br>image</div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- <script src="script.js"></script> -->
    <script>

        ///////////////////////
        // DECLARE VARIABLES //
        ///////////////////////

        let random1 = 0, random2 = 0;
        let timerIsRunning = false, gameIsRunning = false, godModIsRunning = false, isShowNumbers = false;
        let change1T, change1L, change2T, change2L;
        let i, i2;
        let squareAtBlank;
        let images = ['url(img/goku_SSB.jpg)', 'url(img/earth.jpg)', 'url(img/plant.jpg)', 'url(img/cats.jpg)', 'url(img/einstein.png)', 'url(img/piano.jpg)'];

        ///////////////////////
        // Get HTML elements //
        ///////////////////////

        let squares = $('.square');
        let imageFull = $('#imageFull');

        ///////////////
        // FUNCTIONS //
        ///////////////

        // FUNCTION - Change the square positions randomly
        function mixGame() {

            // Stop the transition to prevent problems such as getting wrong top and left values
            $('.square').css({
                'transition-duration': '0ms',
            });
            $('.square').css({
                'transition-duration': '0ms',
            });

            // Get the square which is at the blank position
            for (let square of squares) {
                if (Math.floor($(square).position().left) == 300 &&
                    Math.floor($(square).position().top) == 300) {
                    squareAtBlank = $(square);
                }
            }

            // Get the top and left values of the blank and the square at blank position
            let blankT = Math.floor($('#square16').position().top);
            let blankL = Math.floor($('#square16').position().left);
            let squareAtBlankT = Math.floor(squareAtBlank.position().top);
            let squareAtBlankL = Math.floor(squareAtBlank.position().left);

            // Put the blank at its initial position
            $('#square16').css({
                left: `${squareAtBlankL}px`,
                top: `${squareAtBlankT}px`,
            });
            squareAtBlank.css({
                left: `${blankL}px`,
                top: `${blankT}px`,
            });


            // Mix 100 times two random squares
            for (let i = 0; i < 100; i++) {

                // Generate 2 different random numbers between 0 and 15
                random1 = Math.floor(Math.random() * 15 + 1);
                do {
                    random2 = Math.floor(Math.random() * 15 + 1);
                } while (random2 == random1);

                // Get the top and left values of two random squares
                change1T = $(`#square${random1}`).position().top;
                change1L = $(`#square${random1}`).position().left;
                change2T = $(`#square${random2}`).position().top;
                change2L = $(`#square${random2}`).position().left;

                // Change their positions
                $(`#square${random1}`).css({
                    left: `${change2L}px`,
                    top: `${change2T}px`,
                });

                $(`#square${random2}`).css({
                    left: `${change1L}px`,
                    top: `${change1T}px`,
                });
            }

            // Reassign the transition duration
            $('.square').css({
                'transition-duration': '500ms',
            });
        }

        // Function - Load/Cancel the timer and displays it
        function loadTimer() {
            let time = 0

            // Load the timer
            if (!timerIsRunning) {
                i = setInterval(function () {
                    time++;

                    $('.timer').text(`${time}s`);
                }, 1000);

                timerIsRunning = true;
            } else /*Cancel the timer*/ {
                clearInterval(i);

                time = 0;
                $('.timer').text(`${time}s`);

                timerIsRunning = false;
            }
        }

        // Function - Enable or disable godmod
        function godMod() {
            if (!godModIsRunning) {
                // Disable the actual event which checks the click on adjacent squares
                $('.square').off('click');

                // Applicate a new event without checking adjacent squares
                $('.square').click(function test() {

                    // Get the positions of the clicked square and the blank one
                    blankT = Math.floor($('#square16').position().top);
                    blankL = Math.floor($('#square16').position().left);
                    currentT = Math.floor($(this).position().top);
                    currentL = Math.floor($(this).position().left);

                    // Change their positions
                    $('#square16').css({
                        left: `${currentL}px`,
                        top: `${currentT}px`,
                    });

                    $(this).css({
                        left: `${blankL}px`,
                        top: `${blankT}px`,
                    });

                    godModIsRunning = true;

                    i2 = setTimeout(function () {
                        checkVictory();
                    }, 600);
                });
            } else {
                $('.square').off('click');
                checkSquareClick();

                godModIsRunning = false;
            }
        }

        // Function - Check if a square is clicked and displays it
        function checkSquareClick() {

            // Declare variables
            let clickCounter = 0;
            let blankT = 0, blankL = 0;
            let currentT = 0, currentL = 0;
            let tempT = 0, tempL = 0;

            $('.turns').text(`Counter: ${clickCounter}`);

            if (gameIsRunning) {
                $('.square').click(function test() {

                    // Get the positions of the clicked square and the blank one
                    blankT = Math.floor($('#square16').position().top);
                    blankL = Math.floor($('#square16').position().left);
                    currentT = Math.floor($(this).position().top);
                    currentL = Math.floor($(this).position().left);

                    // Check if the clicked square is adjacent to the blank square
                    if ((currentT == (blankT - 100) && currentL == blankL) || (currentT == (blankT + 100) && currentL == blankL) || (currentT == blankT && currentL == (blankL - 100)) || (currentT == blankT && currentL == (blankL + 100))) {

                        // Change their positions
                        $('#square16').css({
                            left: `${currentL}px`,
                            top: `${currentT}px`
                        });

                        $(this).css({
                            left: `${blankL}px`,
                            top: `${blankT}px`
                        });

                        // Increase and display the click counter
                        clickCounter++;
                        $('.turns').text(`Counter: ${clickCounter}`);

                        i2 = setTimeout(function () {
                            checkVictory();
                        }, 600);
                    }
                });
            } else {
                $('.square').off('click');
            }
        }

        // Function - Check victory
        function checkVictory() {

            // Get the actual position of every square 
            let square1Position = [Math.floor($('#square1').position().left), Math.floor($('#square1').position().top)];
            let square2Position = [Math.floor($('#square2').position().left), Math.floor($('#square2').position().top)];
            let square3Position = [Math.floor($('#square3').position().left), Math.floor($('#square3').position().top)];
            let square4Position = [Math.floor($('#square4').position().left), Math.floor($('#square4').position().top)];
            let square5Position = [Math.floor($('#square5').position().left), Math.floor($('#square5').position().top)];
            let square6Position = [Math.floor($('#square6').position().left), Math.floor($('#square6').position().top)];
            let square7Position = [Math.floor($('#square7').position().left), Math.floor($('#square7').position().top)];
            let square8Position = [Math.floor($('#square8').position().left), Math.floor($('#square8').position().top)];
            let square9Position = [Math.floor($('#square9').position().left), Math.floor($('#square9').position().top)];
            let square10Position = [Math.floor($('#square10').position().left), Math.floor($('#square10').position().top)];
            let square11Position = [Math.floor($('#square11').position().left), Math.floor($('#square11').position().top)];
            let square12Position = [Math.floor($('#square12').position().left), Math.floor($('#square12').position().top)];
            let square13Position = [Math.floor($('#square13').position().left), Math.floor($('#square13').position().top)];
            let square14Position = [Math.floor($('#square14').position().left), Math.floor($('#square14').position().top)];
            let square15Position = [Math.floor($('#square15').position().left), Math.floor($('#square15').position().top)];
            let square16Position = [Math.floor($('#square16').position().left), Math.floor($('#square16').position().top)];

            // Check if the squares are at their initial positions
            if ((square1Position[0] == 0 && square1Position[1] == 0) &&
                (square2Position[0] == 100 && square2Position[1] == 0) &&
                (square3Position[0] == 200 && square3Position[1] == 0) &&
                (square4Position[0] == 300 && square4Position[1] == 0) &&
                (square5Position[0] == 0 && square5Position[1] == 100) &&
                (square6Position[0] == 100 && square6Position[1] == 100) &&
                (square7Position[0] == 200 && square7Position[1] == 100) &&
                (square8Position[0] == 300 && square8Position[1] == 100) &&
                (square9Position[0] == 0 && square9Position[1] == 200) &&
                (square10Position[0] == 100 && square10Position[1] == 200) &&
                (square11Position[0] == 200 && square11Position[1] == 200) &&
                (square12Position[0] == 300 && square12Position[1] == 200) &&
                (square13Position[0] == 0 && square13Position[1] == 300) &&
                (square14Position[0] == 100 && square14Position[1] == 300) &&
                (square15Position[0] == 200 && square15Position[1] == 300) &&
                (square16Position[0] == 300 && square16Position[1] == 300)) {

                // End the game
                gameIsRunning = false;
                checkSquareClick();
                loadTimer();

                alert('You won!');
            }
        }

        // Function - Launch the game
        function launchGame() {
            gameIsRunning = true;

            mixGame();
            loadTimer();
            checkSquareClick();
        }

        // Function - Stop the game
        function stopGame() {
            gameIsRunning = false;

            loadTimer();
            checkSquareClick();
        }

        // Function - Show or hide numbers (help)
        function showNumbers() {
            console.log(squares[0]);

            if (!isShowNumbers) {

                let counterNumbers = 0;

                for (let square of squares) {
                    counterNumbers++;

                    if(counterNumbers != 16) {
                        $(square).text(counterNumbers);
                    }
                }

                isShowNumbers = true;
            } else {
                for (let square of squares) {
                    $(square).text('');
                }

                isShowNumbers = false;
            }
        }

        // Function - Load a new image from the database
        function loadImage() {
            let random = Math.floor(Math.random() * 6);
            let counterImages = 0;

            console.log(random);
            for (let square of squares) {
                console.log(images[random]);
                counterImages++;
                
                if (counterImages != 16) {
                    $(square).css({
                        'background-image': `${images[random]}`,
                    });
                }
            }

            gameIsRunning = false;
            checkSquareClick();
            setInitialPositions();
        }

        // Function - Move the squares to their initial positions 
        function setInitialPositions() {
            for (let square of squares) {
                if ($(square).data().key == 1) {
                    $(square).css({
                        left: 0,
                        top: 0,
                    });
                } else if ($(square).data().key == 2) {
                    $(square).css({
                        left: '100px',
                        top: 0,
                    });
                } else if ($(square).data().key == 3) {
                    $(square).css({
                        left: '200px',
                        top: 0,
                    });
                } else if ($(square).data().key == 4) {
                    $(square).css({
                        left: '300px',
                        top: 0,
                    });
                } else if ($(square).data().key == 5) {
                    $(square).css({
                        left: 0,
                        top: '100px',
                    });
                } else if ($(square).data().key == 6) {
                    $(square).css({
                        left: '100px',
                        top: '100px',
                    });
                } else if ($(square).data().key == 7) {
                    $(square).css({
                        left: '200px',
                        top: '100px',
                    });
                } else if ($(square).data().key == 8) {
                    $(square).css({
                        left: '300px',
                        top: '100px',
                    });
                } else if ($(square).data().key == 9) {
                    $(square).css({
                        left: 0,
                        top: '200px',
                    });
                } else if ($(square).data().key == 10) {
                    $(square).css({
                        left: '100px',
                        top: '200px',
                    });
                } else if ($(square).data().key == 11) {
                    $(square).css({
                        left: '200px',
                        top: '200px',
                    });
                } else if ($(square).data().key == 12) {
                    $(square).css({
                        left: '300px',
                        top: '200px',
                    });
                } else if ($(square).data().key == 13) {
                    $(square).css({
                        left: 0,
                        top: '300px',
                    });
                } else if ($(square).data().key == 14) {
                    $(square).css({
                        left: '100px',
                        top: '300px',
                    });
                } else if ($(square).data().key == 15) {
                    $(square).css({
                        left: '200px',
                        top: '300px',
                    });
                } else if ($(square).data().key == 16) {
                    $(square).css({
                        left: '300px',
                        top: '300px',
                    });
                }
            }
        }

        //////////
        // MAIN //
        //////////

        // Load the game when the play button is clicked
        $('.play-button').click(function () {
            if (!gameIsRunning) {
                launchGame();
            }
        });

        // Stop the game when the stop button is clicked
        $('.stop-button').click(function () {
            if (gameIsRunning) {
                stopGame();
                setInitialPositions();
            }
        });

        // Stop the game and mix the picture
        $('.retry-button').click(function () {
            if (gameIsRunning) {
                stopGame();
                setInitialPositions();
                launchGame();
            }
        });

        // Watch and activate godmod
        $(window).keydown(function (event) {
            if (gameIsRunning && event.key == 'M' && event.shiftKey == true) {
                godMod();
            }
        });

        // Show numbers
        $('#show_Numbers').click(function () {
            showNumbers();
        });

        // Show/hide image
        $('#show_Image').mouseenter(function() {
                imageFull.addClass('help_Show_Image');
        });
        $('#show_Image').mouseleave(function() {
                imageFull.removeClass('help_Show_Image');
        });

        // Load image
        $('#change_Image').click(function() {
            stopGame();
            loadImage();
        });
    </script>
</body>

</html>