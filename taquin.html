<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">

    <title>Taquin</title>
</head>

<body>

    <div class="container">
        <div class="taquin_display">
            <div id="square1" class="square" data-key="1">1</div>
            <div id="square2" class="square" data-key="2">2</div>
            <div id="square3" class="square" data-key="3">3</div>
            <div id="square4" class="square" data-key="4">4</div>
            <div id="square5" class="square" data-key="5">5</div>
            <div id="square6" class="square" data-key="6">6</div>
            <div id="square7" class="square" data-key="7">7</div>
            <div id="square8" class="square" data-key="8">8</div>
            <div id="square9" class="square" data-key="9">9</div>
            <div id="square10" class="square" data-key="10">10</div>
            <div id="square11" class="square" data-key="11">11</div>
            <div id="square12" class="square" data-key="12">12</div>
            <div id="square13" class="square" data-key="13">13</div>
            <div id="square14" class="square" data-key="14">14</div>
            <div id="square15" class="square" data-key="15">15</div>
            <div id="square16" class="square" data-key="16">Blanc</div>
        </div>    
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- <script src="script.js"></script> -->
    <script>
        // Declare variables
        let blankT = 0, blankL = 0;
        let currentT = 0, currentL = 0;
        let tempT = 0, tempL = 0;
        let random1 = 0, random2 = 0;
        
        $('.square').click(function() {
            // Get the positions of the clicked square and the blank one
            blankT = Math.floor($('#square16').position().top);
            blankL = $('#square16').position().left;
            currentT = Math.floor($(this).position().top);
            currentL = $(this).position().left;
            tempT = blankT;
            tempL = blankL;

            console.log(currentT);
            console.log(blankT);
            console.log(currentL);
            console.log(blankL);
            
            // Check if the clicked square is adjacent to the blank square
            if ((currentT == (blankT - 100) && currentL == blankL) || (currentT == (blankT + 100) && currentL == blankL) || (currentT == blankT && currentL == (blankL - 100)) || (currentT == blankT && currentL == (blankL + 100))) {
                // Change their positions
                $('#square16').css({left : `${currentL}px`, top : `${currentT}px`});
                $(this).css({
                    left : `${tempL}px`,
                    top : `${tempT}px`
                });   
            }    
        });

        // Change the square positions randomly when the page loads
        for (let i = 0; i < 50; i++) {
            // Generate 2 different random numbers between 0 and 15
            random1 = Math.floor(Math.random() * (16 - 0));
            do {
                random2 = Math.floor(Math.random() * (16 - 0));
            } while (random2 == random1);

            // Get two random squares
            let change1 = $(`#square${random1}`);
            let change2 = $(`#square${random2}`);
            let change1T = Math.abs(change1.position().top);
            let change1L = Math.abs(change1.position().left);
            
            // Change positions
            change1.css({
                left: `${change2.position().left}px`,
                top: `${change2.position().top}px`
            });
            change2.css({
                left: `${change1L}px`,
                top: `${change1T}px`
            });
        }
    </script>
</body>

</html>